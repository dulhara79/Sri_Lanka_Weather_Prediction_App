# Sri Lanka Weather Prediction App

![Python](https://img.shields.io/badge/Python-3.8%2B-blue)
![Flask](https://img.shields.io/badge/Flask-Latest-green)
![React](https://img.shields.io/badge/React-Latest-61DAFB)
![TensorFlow](https://img.shields.io/badge/TensorFlow-Latest-orange)
![License](https://img.shields.io/badge/License-MIT-yellow)
![Last Updated](https://img.shields.io/badge/Last%20Updated-July%202025-lightgrey)

A machine learning-powered weather forecasting application for Sri Lanka, featuring a Flask backend with ensemble models (XGBoost, LightGBM, Random Forest, and Neural Network) and a React frontend for an intuitive user interface.

## Overview

The **Sri Lanka Weather Predictor** is designed to provide accurate weather forecasts for various cities in Sri Lanka. It leverages historical weather data and an ensemble of machine learning models to predict weather conditions such as temperature, precipitation, wind speed, and more. The application includes:

- **Backend**: A Flask API that serves weather predictions using pre-trained machine learning models.
- **Frontend**: A React-based interface for single-day predictions and multi-day forecasts.
- **Machine Learning**: An ensemble of XGBoost, LightGBM, Random Forest, and Neural Network models trained on weather data.
- **Features**: Seasonal encoding, lag features, and cyclical time features for improved prediction accuracy.

The project supports predictions for major Sri Lankan cities (e.g., Colombo, Kandy, Galle) and allows users to input custom coordinates for precise forecasting.

## Demo

*To add a demo of the application, deploy the frontend and backend to a hosting platform and add screenshots or a GIF here.*

Example:
```
[Demo GIF or Screenshot will be added here]
```

Live Demo: [Sri Lanka Weather Predictor App](#) *(add your deployment URL when available)*

## Latest Evaluation Results

The most recent model evaluation was conducted on July 10, 2025. The ensemble model continues to demonstrate strong predictive performance across various weather metrics.

Key metrics:
- Temperature prediction: RMSE < 1.5°C
- Precipitation prediction: F1 score > 0.82
- Wind speed prediction: MAE < 1.8 km/h

For a full breakdown of model performance, see the [evaluation report](backend/evaluation_results/evaluation_report_20250710_104138.md).

## Features

- **Single-Day Prediction**: Get detailed weather predictions for a specific date and city.
- **Multi-Day Forecast**: Generate weather forecasts for a range of dates (up to 30 days).
- **Supported Cities**: Predefined coordinates for 10 major Sri Lankan cities.
- **Ensemble Model**: Combines predictions from XGBoost, LightGBM, Random Forest, and Neural Network for enhanced accuracy.
- **User-Friendly Interface**: Responsive React frontend with weather icons and detailed summaries.
- **API Endpoints**: Health checks, city lists, single predictions, batch predictions, and forecasts.

## Tech Stack

- **Backend**:
  - Python 3.8+
  - Flask (REST API)
  - Pandas, NumPy (data processing)
  - Scikit-learn, XGBoost, LightGBM, TensorFlow (machine learning)
- **Frontend**:
  - React
  - Tailwind CSS (styling)
  - Lucide Icons (weather icons)
- **Tools**:
  - Google Colab (model training)
  - Joblib (model serialization)
  - Git (version control)

## Installation

### Prerequisites

- Python 3.8 or higher
- Node.js 16 or higher
- Git
- Virtual environment tool (e.g., `venv` or `virtualenv`)

### Backend Setup

1. **Clone the Repository**:
   ```bash
   git clone https://github.com/dulhara79/Sri_Lanka_Weather_Prediction_App.git
   cd Sri_Lanka_Weather_Prediction_App
   ```

2. **Create and Activate a Virtual Environment**:
   ```bash
   python -m venv venv
   # For Windows:
   .\venv\Scripts\activate
   # For macOS/Linux:
   # source venv/bin/activate
   ```

3. **Install Python Dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

   Example `requirements.txt`:
   ```
   flask
   flask-cors
   pandas
   numpy
   scikit-learn
   xgboost
   lightgbm
   tensorflow
   keras
   joblib
   ```

4. **Prepare Model Files**:
   - Place the trained model files (`sri_lanka_weather_model_*.pkl`, `sri_lanka_weather_model_neural_network.h5`) in the `models/` directory.
   - These files are generated by running the training script in Google Colab (see `Sri_Lanka_Weather_Prediction_Model.ipynb`).

5. **Run the Flask Server**:
   ```bash
   python backend/app.py
   ```
   The server will run on `http://localhost:5000`.

### Frontend Setup

1. **Navigate to the Frontend Directory**:
   ```bash
   cd frontend
   ```

2. **Install Node.js Dependencies**:
   ```bash
   npm install
   ```

3. **Start the React Development Server**:
   ```bash
   npm run dev
   ```
   The frontend will be available at `http://localhost:5173`.

### Model Training

1. **Prepare Data**:
   - Upload your weather dataset (CSV format) to Google Colab.
   - The dataset should include columns like `time`, `city`, `latitude`, `longitude`, `elevation`, `temperature_2m_max`, `precipitation_sum`, etc.

2. **Run the Training Script**:
   - Use the provided `Sri_Lanka_Weather_Prediction_Model.ipynb` script in Google Colab to train the models.
   - The script generates model files (`*.pkl`, `*.h5`) that can be downloaded and placed in the `models/` directory.

3. **Download Models**:
   - After training, download the generated model files and place them in the `backend/models/` directory.

## Usage

1. **Single-Day Prediction**:
   - Open the frontend (`http://localhost:5173`).
   - Select a date and city from the dropdown.
   - Optionally enter custom latitude, longitude, and elevation.
   - Click "Predict Weather" to view the forecast.

2. **Multi-Day Forecast**:
   - Switch to the "Forecast" tab.
   - Select a start date, end date, and city.
   - Click "Generate Forecast" to view weather predictions for the selected period.

3. **API Endpoints**:
   - **Health Check**: `GET /health`
   - **Cities List**: `GET /cities`
   - **Single Prediction**: `POST /predict`
     ```json
     {
       "date": "2024-06-15",
       "city": "Colombo",
       "latitude": 6.9271,
       "longitude": 79.8612,
       "elevation": 8
     }
     ```
   - **Multi-Day Forecast**: `POST /forecast`
     ```json
     {
       "start_date": "2024-06-15",
       "end_date": "2024-06-20",
       "city": "Colombo"
     }
     ```
   - **Batch Prediction**: `POST /predict/batch`
     ```json
     {
       "predictions": [
         { "date": "2024-06-15", "city": "Colombo" },
         { "date": "2024-06-15", "city": "Kandy" }
       ]
     }
     ```

## Project Structure

```
sri-lanka-weather-predictor/
├── backend/
│   ├── app.py                # Flask API
│   ├── app_mock.py           # Mock API for testing
│   ├── fix_xgboost.py        # Helper for XGBoost model compatibility
│   ├── evaluation_results/   # Performance evaluation reports
│   ├── models/               # Trained model files
│   ├── utils/                # Utility functions
│   └── requirements.txt      # Python dependencies
├── frontend/
│   ├── src/
│   │   ├── components/       # React components
│   │   │   ├── LoadingSpinner.jsx
│   │   │   ├── WeatherApp.jsx
│   │   │   └── WeatherCard.jsx
│   │   ├── utils/            # Helper functions
│   │   │   ├── api.js        # API communication
│   │   │   └── weatherHelpers.js
│   │   ├── assets/           # Images and icons
│   │   ├── styles/           # CSS files
│   │   ├── App.jsx           # Main React component
│   │   └── main.jsx          # React entry point
│   ├── public/               # Static assets
│   ├── index.html            # HTML template
│   ├── vite.config.js        # Vite configuration
│   ├── eslint.config.js      # ESLint configuration
│   ├── package.json          # Node.js dependencies
│   └── README.md             # Frontend documentation
├── notebooks/
│   └── Sri_Lanka_Weather_Prediction_Model.ipynb  # Model training script
├── requirements.txt          # Project-level Python dependencies
├── LICENSE                   # MIT License
└── README.md                 # Project documentation
```

## Contributing

Contributions are welcome! Please follow these steps:

1. **Fork the repository** by clicking the Fork button on GitHub.
2. **Create a new branch** for your feature or bug fix:
   ```bash
   git checkout -b feature/your-feature-name
   ```
3. **Make your changes** and commit them with descriptive messages:
   ```bash
   git commit -m "Add: detailed description of your changes"
   ```
4. **Push to your branch**:
   ```bash
   git push origin feature/your-feature-name
   ```
5. **Open a Pull Request** on GitHub and provide a clear description of your changes.

### Contribution Guidelines

- Follow the existing code style and conventions
- Write clean, maintainable, and testable code
- Add comments to explain complex logic
- Update documentation if you change functionality
- Write or update tests as necessary
- Ensure all tests pass before submitting a pull request

## Roadmap

- [ ] Add support for more Sri Lankan cities
- [ ] Implement user accounts for saving favorite locations
- [ ] Add historical weather data visualization
- [ ] Create a mobile app version
- [ ] Improve model accuracy with additional data sources
- [ ] Add extreme weather event predictions
- [ ] Implement real-time weather alerts

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

## Acknowledgements

- Weather data preprocessing inspired by time-series forecasting techniques
- Machine learning models built with Scikit-learn, XGBoost, LightGBM, and TensorFlow
- Frontend styling with Tailwind CSS and Lucide Icons
- Special thanks to all contributors who have helped improve this project
